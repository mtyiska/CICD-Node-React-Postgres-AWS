{"ast":null,"code":"import _regeneratorRuntime from\"/home/michael/Desktop/projects/aws/demo-cicd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/michael/Desktop/projects/aws/demo-cicd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useContext}from\"react\";import RestaurantFinder from\"../apis/RestaurantFinder\";import{RestaurantsContext}from\"../context/RestaurantsContext\";import{useHistory}from\"react-router-dom\";import StarRating from\"./StarRating\";var RestaurantList=function RestaurantList(props){var _useContext=useContext(RestaurantsContext),restaurants=_useContext.restaurants,setRestaurants=_useContext.setRestaurants;var history=useHistory();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return RestaurantFinder.get(\"/\");case 3:response=_context.sent;console.log(response.data.data);setRestaurants(response.data.data.restaurants);_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e,id){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.stopPropagation();_context2.prev=1;_context2.next=4;return RestaurantFinder.delete(\"/\".concat(id));case 4:response=_context2.sent;setRestaurants(restaurants.filter(function(restaurant){return restaurant.id!==id;}));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function handleDelete(_x,_x2){return _ref2.apply(this,arguments);};}();var handleUpdate=function handleUpdate(e,id){e.stopPropagation();history.push(\"/restaurants/\".concat(id,\"/update\"));};var handleRestaurantSelect=function handleRestaurantSelect(id){history.push(\"/restaurants/\".concat(id));};var renderRating=function renderRating(restaurant){if(!restaurant.count){return/*#__PURE__*/React.createElement(\"span\",{className:\"text-warning\"},\"0 reviews\");}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(StarRating,{rating:restaurant.id}),/*#__PURE__*/React.createElement(\"span\",{className:\"text-warning ml-1\"},\"(\",restaurant.count,\")\"));};return/*#__PURE__*/React.createElement(\"div\",{className:\"list-group\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-hover table-dark\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"bg-primary\"},/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Restaurant\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Location\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Price Range\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Ratings\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Edit\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Delete\"))),/*#__PURE__*/React.createElement(\"tbody\",null,restaurants&&restaurants.map(function(restaurant){return/*#__PURE__*/React.createElement(\"tr\",{onClick:function onClick(){return handleRestaurantSelect(restaurant.id);},key:restaurant.id},/*#__PURE__*/React.createElement(\"td\",null,restaurant.name),/*#__PURE__*/React.createElement(\"td\",null,restaurant.location),/*#__PURE__*/React.createElement(\"td\",null,\"$\".repeat(restaurant.price_range)),/*#__PURE__*/React.createElement(\"td\",null,renderRating(restaurant)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return handleUpdate(e,restaurant.id);},className:\"btn btn-warning\"},\"Update\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return handleDelete(e,restaurant.id);},className:\"btn btn-danger\"},\"Delete\")));}))));};export default RestaurantList;","map":{"version":3,"sources":["/home/michael/Desktop/projects/aws/demo-cicd/client/src/components/RestaurantList.jsx"],"names":["React","useEffect","useContext","RestaurantFinder","RestaurantsContext","useHistory","StarRating","RestaurantList","props","restaurants","setRestaurants","history","fetchData","get","response","console","log","data","handleDelete","e","id","stopPropagation","delete","filter","restaurant","handleUpdate","push","handleRestaurantSelect","renderRating","count","map","name","location","repeat","price_range"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext } from \"react\";\nimport RestaurantFinder from \"../apis/RestaurantFinder\";\nimport { RestaurantsContext } from \"../context/RestaurantsContext\";\nimport { useHistory } from \"react-router-dom\";\nimport StarRating from \"./StarRating\";\n\nconst RestaurantList = (props) => {\n  const { restaurants, setRestaurants } = useContext(RestaurantsContext);\n  let history = useHistory();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await RestaurantFinder.get(\"/\");\n        console.log(response.data.data);\n        setRestaurants(response.data.data.restaurants);\n      } catch (err) {}\n    };\n\n    fetchData();\n  }, []);\n\n  const handleDelete = async (e, id) => {\n    e.stopPropagation();\n    try {\n      const response = await RestaurantFinder.delete(`/${id}`);\n      setRestaurants(\n        restaurants.filter((restaurant) => {\n          return restaurant.id !== id;\n        })\n      );\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleUpdate = (e, id) => {\n    e.stopPropagation();\n    history.push(`/restaurants/${id}/update`);\n  };\n\n  const handleRestaurantSelect = (id) => {\n    history.push(`/restaurants/${id}`);\n  };\n\n  const renderRating = (restaurant) => {\n    if (!restaurant.count) {\n      return <span className=\"text-warning\">0 reviews</span>;\n    }\n    return (\n      <>\n        <StarRating rating={restaurant.id} />\n        <span className=\"text-warning ml-1\">({restaurant.count})</span>\n      </>\n    );\n  };\n\n  return (\n    <div className=\"list-group\">\n      <table className=\"table table-hover table-dark\">\n        <thead>\n          <tr className=\"bg-primary\">\n            <th scope=\"col\">Restaurant</th>\n            <th scope=\"col\">Location</th>\n            <th scope=\"col\">Price Range</th>\n            <th scope=\"col\">Ratings</th>\n            <th scope=\"col\">Edit</th>\n            <th scope=\"col\">Delete</th>\n          </tr>\n        </thead>\n        <tbody>\n          {restaurants &&\n            restaurants.map((restaurant) => {\n              return (\n                <tr\n                  onClick={() => handleRestaurantSelect(restaurant.id)}\n                  key={restaurant.id}\n                >\n                  <td>{restaurant.name}</td>\n                  <td>{restaurant.location}</td>\n                  <td>{\"$\".repeat(restaurant.price_range)}</td>\n                  <td>{renderRating(restaurant)}</td>\n                  <td>\n                    <button\n                      onClick={(e) => handleUpdate(e, restaurant.id)}\n                      className=\"btn btn-warning\"\n                    >\n                      Update\n                    </button>\n                  </td>\n                  <td>\n                    <button\n                      onClick={(e) => handleDelete(e, restaurant.id)}\n                      className=\"btn btn-danger\"\n                    >\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n              );\n            })}\n          {/* <tr>\n            <td>mcdonalds</td>\n            <td>New YOrk</td>\n            <td>$$</td>\n            <td>Rating</td>\n            <td>\n              <button className=\"btn btn-warning\">Update</button>\n            </td>\n            <td>\n              <button className=\"btn btn-danger\">Delete</button>\n            </td>\n          </tr>\n\n          <tr>\n            <td>mcdonalds</td>\n            <td>New YOrk</td>\n            <td>$$</td>\n            <td>Rating</td>\n            <td>\n              <button className=\"btn btn-warning\">Update</button>\n            </td>\n            <td>\n              <button className=\"btn btn-danger\">Delete</button>\n            </td>\n          </tr> */}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default RestaurantList;\n"]},"metadata":{},"sourceType":"module"}